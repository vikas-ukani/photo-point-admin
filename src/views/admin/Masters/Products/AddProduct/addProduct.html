<!-- <template>
    <div>
        <h1>Hello </h1>
    </div>
</template>
 -->
<template>
    <div class="animated fadeIn">
        <div class>
            <page-header :is_delete_all="false" :is_show_add_button="false" :is_show_model="false"
                :is_show_serach="false" :title="$route.name" back_route="/products" />

            <div class="card card-body">
                <form class="row" enctype="multipart/form-data" method="post" name="addEditForm" novalidate>
                    <div class="input-group row col-md-12">
                        <div class="mb-3 col-md-12 font-dark">
                            <h5 class="font-weight-bolder">Step 1: Select a category.</h5>
                        </div>

                        <div class="mb-3 col-md-4">
                            <label class="text-capitalize">
                                Main Category
                                <small
                                    :class="!detail.name || errors.has('name') ? 'text-danger' : 'text-success' ">*</small>
                            </label>
                            <a class="pull-right"
                                @click="main_category_id = undefine; subcategory_list = [];child_category_list = [] ">
                                <i class="fa fa-times text-danger"></i>
                            </a>
                            {{main_category_id}}
                            <!-- object value -->
                            <model-select :options="category_list" placeholder="Select Main category"
                                v-model="main_category_id"
                                @change="getCategoryListById(main_category_id, 'subcategory_list')" />
                        </div>

                        <div class="mb-3 col-md-4">
                            <div v-if="subcategory_list && subcategory_list.length">
                                <label class="text-capitalize">
                                    Subcategory
                                    <small
                                        :class="!detail.name || errors.has('name') ? 'text-danger' : 'text-success' ">*</small>
                                </label>
                                <model-select :options="subcategory_list" placeholder="Select Sub category"
                                    v-model="subcategory_id"></model-select>
                            </div>
                        </div>

                        <div class="mb-3 col-md-4">
                            <div v-if="child_category_list && child_category_list.length">
                                <label class="text-capitalize">
                                    child category
                                    <small
                                        :class="!detail.name || errors.has('name') ? 'text-danger' : 'text-success' ">*</small>
                                </label>
                                <model-select :options="child_category_list" placeholder="Select clild category"
                                    v-model="clild_category_id"></model-select>
                            </div>
                        </div>
                    </div>

                    <div class="input-group col-12 mt-3 border-top pt-3" id="sticky-reference">
                        <h5 class="mb-3">Step 2: Edit Product Information</h5>
                        <div class="pb-2 border-dark mb-4 col-12">
                            <div class="form-group row">
                                <div class="input-group pl-0 mb-3 col-md-12">
                                    <label class="text-capitalize" for="name">
                                        name
                                        <small
                                            :class="!detail.name || errors.has('name') ? 'text-danger' : 'text-success' ">*</small>
                                    </label>
                                    <div class="input-group">
                                        <input :class="{ 'is-invalid': errors.has('name') }" class="form-control"
                                            id="name" name="name" placeholder="Enter name" required type="text"
                                            v-model="detail.name" v-validate="'required'" />
                                    </div>
                                    <small class="text-danger mt-1"
                                        v-if="errors.has('name')">{{ errors.first('name') }}</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="input-group col-12 mt-3 border-top pt-3" id="sticky-reference">
                        <div class="input-group row col-md-12 mb-4">
                            <div class="mb-3 col-md-12 font-dark">
                                <h5>Step 3: Product attributes</h5>
                            </div>

                            <div class="input-group mb-3 col-md-6" v-if="size_attributes && size_attributes.length">
                                <label class="text-capitalize" for="size">Size</label>
                                <multiselect id="size" v-model="size_selected" tag-placeholder="Add this as new tag"
                                    placeholder="Search or add a tag" label="name" track-by="code"
                                    :options="size_attributes" :multiple="true" :taggable="true"
                                    @tag="addSizeTag('ke')"></multiselect>
                            </div>

                            <div class="input-group mb-3 col-md-6" v-if="color_attributes && color_attributes.length">
                                <label class="text-capitalize" for="size">color</label>
                                <multiselect id="color" v-model="color_selected" tag-placeholder="Add this as new tag"
                                    placeholder="Search or add a tag" label="name" track-by="code"
                                    :options="color_attributes" :multiple="true" :taggable="true"
                                    @tag="addColorTag('ke')"></multiselect>
                            </div>

                            <div class="input-group col-12 mt-3 border-top pt-3" id="sticky-reference">
                                <button class="btn btn-danger" @click="makeStockInputDetails">Confirm</button>
                            </div>
                        </div>

                        <div class="input-group mb-3 col-md-12">
                            <label class="text-capitalize" for="price">
                                <b>description</b>
                            </label>
                            <div class="input-group">
                                <vue-editor id="editor" v-model="detail.description"></vue-editor>
                            </div>
                        </div>

                        <div class="input-group mt-5 mb-3 col-md-6">
                            <label class="text-capitalize" for="price">
                                price
                                <small
                                    :class="!detail.price || errors.has('price') ? 'text-danger' : 'text-success' ">*</small>
                            </label>
                            <div class="input-group">
                                <input :class="{ 'is-invalid': errors.has('price') }" class="form-control" id="price"
                                    name="price" placeholder="Enter price" required type="text" v-model="detail.price"
                                    v-validate="'required|numeric'" />
                            </div>
                            <small class="text-danger mt-1"
                                v-if="errors.has('price')">{{ errors.first('price') }}</small>
                        </div>

                        <div class="input-group">
                            <label class="text-capitalize ml-3" for="price">Image</label>
                            <div class="input-group mb-3 col-md-12">
                                <div class="input-group pull-left">
                                    <vue-upload-multiple-image :data-images="detail.images"
                                        @before-remove="beforeRemove" @edit-image="editImage"
                                        @upload-success="uploadImageSuccess" browseText="Select Product Images"
                                        dragText="Browse Image" popupText="Uploaded Image" primaryText="Image" />
                                </div>
                            </div>
                        </div>
                        <div class="input-group mb-3">
                            <label class="text-capitalize ml-3" for="name">
                                Active
                                <!-- <small
                              :class="!detail.name || errors.has('name') ? 'text-danger' : 'text-success' "
                >*</small>-->
                            </label>
                            <div class="input-group col-md-12">
                                <switches color="green" theme="bulma" type-bold="false"
                                    v-bind:label="detail.is_active === true ? 'Active' : 'Deactive'"
                                    v-model="detail.is_active" />
                            </div>
                            <!-- <small
                            v-if="errors.has('name')"
                            class="text-danger mt-1"
              >{{ errors.first('name') }}</small>-->
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</template>